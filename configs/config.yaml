server:
  http:
    addr: 0.0.0.0:8000
    timeout: 1s
  grpc:
    addr: 0.0.0.0:9000
    timeout: 1s

data:
  database:
    addr: 192.168.218.131:5306
    user: root
    password: "123456"
    database: chat_sql
    max_idle_conn: 2000
    max_open_conn: 20000
    max_idle_time: 30
    slow_threshold_millisecond: 10 # SQL执行超过10ms，就算慢sql

  redis:
    addr: 192.168.218.131:5379
    password: "123456"
    db: 8
    pool_size: 20
    read_timeout: 2s
    write_timeout: 2s

  kafka:
    enabled: true
    hosts: "192.168.218.131:9092"  # 多个地址用逗号分隔，例如 "192.168.1.1:9092,192.168.1.2:9092"
    topic: "go-chat-message"
    timeout: 10  # 超时时间（秒），默认 10
    partition: 1  # 分区数，默认 1
    group_id: "chat"  # 消费者组 ID，默认 "chat"
    start_offset: "last"  # 起始消费位置：first（最早）或 last（最新），默认 "last"
    replication_factor: 1  # 副本因子，默认 1
    allow_auto_topic_creation: false  # 是否允许自动创建主题，默认 false
    required_acks: "none"  # 消息确认机制：none（不需要确认）、one（leader确认）、all（所有副本确认），默认 "none"
    commit_interval: 10  # 提交偏移量的时间间隔（秒），默认与 timeout 相同

  storage:
    static_dir: "./static/"

jwt:
  secret: "hello"
  expire: "24h"

log:
  director: "./logs"
  level: "debug"
  format: "console"           # console 或 json
  stacktrace_key: "stacktrace"
  encode_level: "LowercaseLevelEncoder"
  log_in_console: false
  show_line: true

sms:
  access_key_id: "AKID_EXAMPLE"
  access_key_secret: "SECRET_EXAMPLE"
  endpoint: "dysmsapi.aliyuncs.com"
  sign_name: "阿里云"
  template_code: "SMS_154950909"
  verification_code:
    length: 6
    expire: "5m"
    max_retry: 3
    debug: true
  rate_limit:
    max_requests_per_minute: 1
    max_requests_per_hour: 5
    max_requests_per_day: 10
  retry:
    max_attempts: 3
    backoff: "1s"